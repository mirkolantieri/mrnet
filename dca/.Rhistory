calibration
calibration()
library(caret)
setwd("~/Documenti/GitHub/mrnet/dca")
library(ggplot2)
# Complex Model AUC
meniscus_lab <- read.csv2('./results (model auc)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_pred <- read.csv2('./results (model auc)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_lab <- read.csv2('./results (model auc)/Complex/complex-abnormal-label.csv', sep = ',')
abn_pred <- read.csv2('./results (model auc)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_lab <- read.csv2('./results (model auc)/Complex/complex-acl-label.csv', sep = ',')
acl_pred <- read.csv2('./results (model auc)/Complex/complex-acl-prediction.csv', sep = ',')
# Merge label-pred score
meniscus <- merge(meniscus_lab, meniscus_pred, by="Case", all=TRUE)
abn <- merge(abn_lab, abn_pred, by = "Case", all=TRUE)
acl <- merge(acl_lab, acl_pred, by = "Case", all=TRUE)
mod <- lm(Score.x ~ Score.y, data = meniscus)
mod
intercept <- mod$coefficients[1]
intercept
slope <- mod$coefficients[2]
slope
ggplot(data = meniscus, aes(x = slope, y=intercept, colour = i +d)) + geom_point() + geom_smooth(method = lm. se = FALSE)
ggplot(data = meniscus, aes(x = slope, y=intercept)) + geom_point() + geom_smooth(method = lm. se = FALSE)
ggplot(data = meniscus, aes(x = slope, y=intercept)) + geom_point() + geom_smooth(method = lm, se = FALSE)
ggplot(data = meniscus, aes(x = mod$fitted.values, y=intercept)) + geom_point() + geom_smooth(method = lm, se = FALSE)
ggplot(data = meniscus, aes(x = mod$fitted.values, y=mod$df.residual)) + geom_point() + geom_smooth(method = lm, se = FALSE)
ggplot(data = meniscus, aes(x = mod$fitted.values, y=mod)) + geom_point() + geom_smooth(method = lm, se = FALSE)
ggplot(data = meniscus, aes(x = mod$fitted.values, y=abs)) + geom_point() + geom_smooth(method = lm, se = FALSE)
ggplot(data = meniscus, aes(x = mod$fitted.values, y=mod$rank)) + geom_point() + geom_smooth(method = lm, se = FALSE)
plot(mod)
mod
library(riskRegression)
#install.packages("riskRegression")
install.packages("prodlim")
library(riskRegression)
library(prodlim)
# Complex Model AUC
meniscus_lab <- read.csv2('./results (model auc)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_pred <- read.csv2('./results (model auc)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_lab <- read.csv2('./results (model auc)/Complex/complex-abnormal-label.csv', sep = ',')
abn_pred <- read.csv2('./results (model auc)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_lab <- read.csv2('./results (model auc)/Complex/complex-acl-label.csv', sep = ',')
acl_pred <- read.csv2('./results (model auc)/Complex/complex-acl-prediction.csv', sep = ',')
# Merge label-pred score
meniscus <- merge(meniscus_lab, meniscus_pred, by="Case", all=TRUE)
abn <- merge(abn_lab, abn_pred, by = "Case", all=TRUE)
acl <- merge(acl_lab, acl_pred, by = "Case", all=TRUE)
baseline.model <- decision_curve(Score.x ~ Score.y,
data = meniscus,
policy = "opt-in",
bootstraps = 50)
# Import library
library(rmda)
baseline.model <- decision_curve(Score.x ~ Score.y,
data = meniscus,
policy = "opt-in",
bootstraps = 50)
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Blue)",
col = c("darkblue", "orange"))
baseline.model <- decision_curve(Score.x ~ Score.y,
data = abn,
policy = "opt-in",
bootstraps = 50)
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Abnormal class (Model Blue) ",
col = c('red', 'green'),  )
baseline.model <- decision_curve(Score.x ~ Score.y,
data = acl,
policy = "opt-in",
bootstraps = 50)
plot_decision_curve(baseline.model,  curve.names = "Complex cases - ACL class (Model Blue)",
col = c("darkyellow", "cyan"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - ACL class (Model Blue)",
col = c("darkorange", "cyan"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - ACL class (Model Blue)",
col = c("darkorange", "navy"))
meniscus_lab <- read.csv2('./results (model wu)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_pred <- read.csv2('./results (model wu)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_lab <- read.csv2('./results (model wu)/Complex/complex-abnormal-label.csv', sep = ',')
abn_pred <- read.csv2('./results (model wu)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_lab <- read.csv2('./results (model wu)/Complex/complex-acl-label.csv', sep = ',')
acl_pred <- read.csv2('./results (model wu)/Complex/complex-acl-prediction.csv', sep = ',')
meniscus <- merge(meniscus_lab, meniscus_pred, by = "Case", all = TRUE)
abn <- merge(abn_lab, abn_pred, by = "Case", all = TRUE)
acl <- merge(acl_lab, acl_pred, by = "Case", all = TRUE)
baseline.model <- decision_curve(Score.x ~ Score.y,
data = meniscus,
policy = "opt-in",
bootstraps = 50)
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("gray", "black"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("pink", "black"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("pink", "black"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("purple", "black"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("purple", "#39847"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("purple", "39847"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("purple", "534"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("purple", "forest"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Meniscus class (Model Green)",
col = c("blue", "red"))
baseline.model <- decision_curve(Score.x ~ Score.y,
data = abn,
policy = "opt-in",
bootstraps = 50)
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Abnormal class (Model Green) ",
col = c("orange", "green"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - Abnormal class (Model Green) ",
col = c("orange", "black"))
baseline.model <- decision_curve(Score.x ~ Score.y,
data = acl,
policy = "opt-in",
bootstraps = 50)
plot_decision_curve(baseline.model,  curve.names = "Complex cases - ACL class (Model Green) ",
col = c("green", "yellow"))
plot_decision_curve(baseline.model,  curve.names = "Complex cases - ACL class (Model Green) ",
col = c("green", "navy"))
db=sampleData(100,outcome="binary")
fb1=glm(Y~X1+X5+X7,data=db,family="binomial")
fb2=glm(Y~X1+X3+X6+X7,data=db,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Y~1,data=db,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
plotCalibration(xb,bars=TRUE,model="model1")
plotCalibration(xb,models=1,bars=TRUE,names.cex=1.3)
fb1=glm(Y~X1+X5+X7,data=meniscus,family="binomial")
fb1=glm(Score.x~Score.y,data=meniscus,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Y~1,data=db,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
xb=Score(list(model1=fb1,model2=fb2),Score.y~1,data=meniscus,
plots="cal")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data=meniscus,
plots="cal")
meniscus_wu_lab <- read.csv2('./results (model wu)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_wu_pred <- read.csv2('./results (model wu)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_wu_lab <- read.csv2('./results (model wu)/Complex/complex-abnormal-label.csv', sep = ',')
abn_wu_pred <- read.csv2('./results (model wu)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_wu_lab <- read.csv2('./results (model wu)/Complex/complex-acl-label.csv', sep = ',')
acl_wu_pred <- read.csv2('./results (model wu)/Complex/complex-acl-prediction.csv', sep = ',')
men_wu <- merge(meniscus_lab, meniscus_pred, by = "Case", all = TRUE)
abn_wu <- merge(abn_lab, abn_pred, by = "Case", all = TRUE)
acl_wu <- merge(acl_lab, acl_pred, by = "Case", all = TRUE)
# Complex Model AUC
meniscus_lab <- read.csv2('./results (model auc)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_pred <- read.csv2('./results (model auc)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_lab <- read.csv2('./results (model auc)/Complex/complex-abnormal-label.csv', sep = ',')
abn_pred <- read.csv2('./results (model auc)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_lab <- read.csv2('./results (model auc)/Complex/complex-acl-label.csv', sep = ',')
acl_pred <- read.csv2('./results (model auc)/Complex/complex-acl-prediction.csv', sep = ',')
# Merge label-pred score
men_acc <- merge(meniscus_lab, meniscus_pred, by="Case", all=TRUE)
abn_acc <- merge(abn_lab, abn_pred, by = "Case", all=TRUE)
acl_acc <- merge(acl_lab, acl_pred, by = "Case", all=TRUE)
fb1=glm(Score.x~Score.y,data=men_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=men_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,
plots="cal")
fb2=glm(Score.x~Score.y,data=men_wu,family="binomial")
men_wu <- merge(meniscus_lab, meniscus_pred, by = "Case", all = TRUE)
abn_wu <- merge(abn_lab, abn_pred, by = "Case", all = TRUE)
acl_wu <- merge(acl_lab, acl_pred, by = "Case", all = TRUE)
fb1=glm(Score.x~Score.y,data=men_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=men_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,
plots="cal")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_wu,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_auc,
plots="cal")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_acc,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
plotCalibration(xb,bars=TRUE,model="model1")
plotCalibration(fb1,brier.in.legend=TRUE)
xb
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_acc$Score.x,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_acc,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
plotCalibration(xb,bars=TRUE,model="model1")
plotCalibration(xb,models=1,bars=TRUE,names.cex=1.3)
fb1=glm(Score.x~Score.y,data=men_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=men_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_acc,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue - Class Meniscus")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue - Class Meniscus (Complex Case)")
title(main = "Calibration Curve Model Blue and Model Green - Class Meniscus (Complex Case)")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Meniscus (Complex Case)")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_acc,
plots="boxplot")
plotCalibration(xb,brier.in.legend=TRUE)
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = men_acc,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Meniscus (Complex Case)")
fb1=glm(Score.x~Score.y,data=abn_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=abn_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_acc,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
fb1=glm(Score.x~Score.y,data=abn_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=abn_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_acc,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
# Complex Model AUC
meniscus_lab <- read.csv2('./results (model auc)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_pred <- read.csv2('./results (model auc)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_lab <- read.csv2('./results (model auc)/Complex/complex-abnormal-label.csv', sep = ',')
abn_pred <- read.csv2('./results (model auc)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_lab <- read.csv2('./results (model auc)/Complex/complex-acl-label.csv', sep = ',')
acl_pred <- read.csv2('./results (model auc)/Complex/complex-acl-prediction.csv', sep = ',')
# Merge label-pred score
men_acc <- merge(meniscus_lab, meniscus_pred, by="Case", all=TRUE)
abn_acc <- merge(abn_lab, abn_pred, by = "Case", all=TRUE)
acl_acc <- merge(acl_lab, acl_pred, by = "Case", all=TRUE)
meniscus_wu_lab <- read.csv2('./results (model wu)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_wu_pred <- read.csv2('./results (model wu)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_wu_lab <- read.csv2('./results (model wu)/Complex/complex-abnormal-label.csv', sep = ',')
abn_wu_pred <- read.csv2('./results (model wu)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_wu_lab <- read.csv2('./results (model wu)/Complex/complex-acl-label.csv', sep = ',')
acl_wu_pred <- read.csv2('./results (model wu)/Complex/complex-acl-prediction.csv', sep = ',')
men_wu <- merge(meniscus_lab, meniscus_pred, by = "Case", all = TRUE)
abn_wu <- merge(abn_lab, abn_pred, by = "Case", all = TRUE)
acl_wu <- merge(acl_lab, acl_pred, by = "Case", all = TRUE)
fb1=glm(Score.x~Score.y,data=abn_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=abn_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_acc,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
plotCalibration(xb,brier.in.legend=TRUE)
fb1=glm(Score.x~Score.y,data=acl_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=acl_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = acl_acc,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class ACL (Complex Case)")
fb1=glm(Score.x~Score.y,data=acl_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=acl_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = acl_wu,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
View(fb2)
fb1
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = acl_wu,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class ACL (Complex Case)")
fb1=glm(Score.y~Score.x,data=abn_acc,family="binomial")
fb2=glm(Score.y~Score.x,data=abn_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.x~Score.y,data = abn_wu,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
View(acl_wu)
plot(xb,brier.in.legend=TRUE)
plotCalibration
plotCalibration(xb,brier.in.legend=TRUE)
plotCalibration(xb )
,
,
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class ACL (Complex Case)")
xb=Score(list(model1=fb2,model2=fb2),Score.x~Score.y,data = abn_wu,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
fb1=glm(Score.x~Score.y,data=abn_acc,family ="gaussian")
fb2=glm(Score.x~Score.y,data=abn_wu,family="gaussian")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
#install.packages("riskRegression")
#install.packages("prodlim")
library(ggplot2)
library(riskRegression)
library(prodlim)
# Complex Model AUC
meniscus_lab <- read.csv2('./results (model auc)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_pred <- read.csv2('./results (model auc)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_lab <- read.csv2('./results (model auc)/Complex/complex-abnormal-label.csv', sep = ',')
abn_pred <- read.csv2('./results (model auc)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_lab <- read.csv2('./results (model auc)/Complex/complex-acl-label.csv', sep = ',')
acl_pred <- read.csv2('./results (model auc)/Complex/complex-acl-prediction.csv', sep = ',')
# Merge label-pred score
men_acc <- merge(meniscus_lab, meniscus_pred, by="Case", all=TRUE)
abn_acc <- merge(abn_lab, abn_pred, by = "Case", all=TRUE)
acl_acc <- merge(acl_lab, acl_pred, by = "Case", all=TRUE)
# mod <- lm(Score.x ~ Score.y, data = meniscus)
# intercept <- mod$coefficients[1]
# slope <- mod$coefficients[2]
meniscus_wu_lab <- read.csv2('./results (model wu)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_wu_pred <- read.csv2('./results (model wu)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_wu_lab <- read.csv2('./results (model wu)/Complex/complex-abnormal-label.csv', sep = ',')
abn_wu_pred <- read.csv2('./results (model wu)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_wu_lab <- read.csv2('./results (model wu)/Complex/complex-acl-label.csv', sep = ',')
acl_wu_pred <- read.csv2('./results (model wu)/Complex/complex-acl-prediction.csv', sep = ',')
men_wu <- merge(meniscus_lab, meniscus_pred, by = "Case", all = TRUE)
abn_wu <- merge(abn_lab, abn_pred, by = "Case", all = TRUE)
acl_wu <- merge(acl_lab, acl_pred, by = "Case", all = TRUE)
fb1=glm(Score.x~Score.y,data=abn_acc,family ="gaussian")
fb2=glm(Score.x~Score.y,data=abn_wu,family="gaussian")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="calibration")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
fb1=glm(Score.x~Score.y,data=acl_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=acl_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = acl_wu,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class ACL (Complex Case)")
fb1=glm(Score.x~Score.y,data=acl_acc,family="gaussian")
fb2=glm(Score.x~Score.y,data=acl_wu,family="gaussian")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = acl_wu,
plots="cal")
fb1=glm(Score.x~Score.y,data=acl_acc,family="binomial")
fb2=glm(Score.x~Score.y,data=acl_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = acl_wu,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
plotCalibration(xb$Calibration,brier.in.legend=TRUE)
xb$Calibration
plot(xb$Calibration)
plotCalibration(xb$Calibration,brier.in.legend=TRUE)
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class ACL (Complex Case)")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = acl_wu,
plots="cals")
plotCalibration(xb,brier.in.legend=TRUE)
plotCalibration(xb,models=1,bars=TRUE,names.cex=1.3)
plotCalibration(xb,bars=TRUE,model="model1")
fb1=glm(Score.x~Score.y,data=abn_acc,family ="binomial")
fb2=glm(Score.x~Score.y,data=abn_wu,family="gaussian")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
# Complex Model AUC
meniscus_lab <- read.csv2('./results (model auc)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_pred <- read.csv2('./results (model auc)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_lab <- read.csv2('./results (model auc)/Complex/complex-abnormal-label.csv', sep = ',')
abn_pred <- read.csv2('./results (model auc)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_lab <- read.csv2('./results (model auc)/Complex/complex-acl-label.csv', sep = ',')
acl_pred <- read.csv2('./results (model auc)/Complex/complex-acl-prediction.csv', sep = ',')
# Merge label-pred score
men_acc <- merge(meniscus_lab, meniscus_pred, by="Case", all=TRUE)
abn_acc <- merge(abn_lab, abn_pred, by = "Case", all=TRUE)
acl_acc <- merge(acl_lab, acl_pred, by = "Case", all=TRUE)
meniscus_wu_lab <- read.csv2('./results (model wu)/Complex/complex-meniscus-label.csv', sep = ',')
meniscus_wu_pred <- read.csv2('./results (model wu)/Complex/complex-meniscus-prediction.csv', sep = ',')
abn_wu_lab <- read.csv2('./results (model wu)/Complex/complex-abnormal-label.csv', sep = ',')
abn_wu_pred <- read.csv2('./results (model wu)/Complex/complex-abnormal-prediction.csv', sep = ',')
acl_wu_lab <- read.csv2('./results (model wu)/Complex/complex-acl-label.csv', sep = ',')
acl_wu_pred <- read.csv2('./results (model wu)/Complex/complex-acl-prediction.csv', sep = ',')
men_wu <- merge(meniscus_lab, meniscus_pred, by = "Case", all = TRUE)
abn_wu <- merge(abn_lab, abn_pred, by = "Case", all = TRUE)
acl_wu <- merge(acl_lab, acl_pred, by = "Case", all = TRUE)
fb1=glm(abn_lab$Score~abn_pred$Score,data=abn_acc,family ="binomial")
fb1=glm(abn_lab$Score~abn_pred$Score,data=abn_acc,family ="binomial")
fb2=glm(abn_wu_lab$Score~abn_wu_pred$Score,data=abn_wu,family="gaussian")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="cal")
fb2=glm(abn_wu_lab$Score~abn_wu_pred$Score,data=abn_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
fb1=glm(abn_lab$Score~abn_pred$Score,data=abn_acc,family ="poisson")
fb2=glm(abn_wu_lab$Score~abn_wu_pred$Score,data=abn_wu,family="poisson")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="cal")
xb=predict(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,
plots="cal")
fb1=glm(abn_lab$Score~abn_pred$Score,data=abn_acc,family ="binomial")
fb2=glm(abn_wu_lab$Score~abn_wu_pred$Score,data=abn_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu,   split.method="loob",
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
title(main = "Calibration Curve Model Blue and Model Green - Class Abnormal (Complex Case)")
fb1=glm(abn_acc$Score.x~abn_acc$Score.y,data=abn_acc,family ="binomial")
fb2=glm(abn_wu$Score.x~abn_wu$Score.y,data=abn_wu,family="binomial")
xb=Score(list(model1=fb1,model2=fb2),Score.y~Score.x,data = abn_wu, split.method="loob",
plots="cal")
plotCalibration(xb,brier.in.legend=TRUE)
